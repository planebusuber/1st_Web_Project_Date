{% extends "date/base.html" %}


{% block main_area %}

<!--{% if user.is_authenticated %}-->
<!--    {% if user.is_superuser or user %}-->

<!--        <a class="btn btn btn-sm text-white" style="background-color: #FC4C64;" href="/date/post_review/" role="button">-->
<!--            <i class="fa-solid fa-pen-to-square" ></i>  글 쓰기-->
<!--        </a>-->
<!--    {% endif %}-->
<!--{% endif %}글쓰기 코드 -->

<h1>
    {% if category %}
        <span class = "badge bg-secondary">{{ category }}</span>
    {% endif %}
    {% if tag %}
        <span class = "badge bg-secondary">
            <i class="fa-solid fa-tags"></i> {{ tag }}
        </span>
    {% endif %}
    {% if search_info %}
        <small class="text-muted">{{ search_info }}</small>
    {% endif %}
</h1>
{% if post_list.exists %}
{% for p in post_list %}
<!-- Blog post-->
<div class="card mb-4" id="post-{{ p.pk }}">
        {% if p.head_image %}
        <a href="#!"><img class="card-img-top" src="{{ p.head_image.url }}" alt="{{ p }} head image" /></a>
        {% else %}
        <img class="card-img-top" src="https://picsum.photos/seed/{{ p.pk }}/800/200" alt="random image" />
        {% endif %}
        <div class="card-body">
            {% if p.category %}
            <span class = "badge bg-secondary float-end">{{ p.category }}</span>
            {% else %}
             <span class = "badge bg-secondary float-end">미분류</span>
            {% endif %}
            <div class="small text-muted"> {{ p.created_at }}</div>
            <h2 class="card-title h4">{{ p.title }}</h2>
            {% if p.hook_text %}
            <h5 class="text-muted">{{ p.hook_text }}</h5>
            {% endif %}
            <p class="card-text">{{ p.get_content_markdown | truncatewords_html:40 | safe}}</p>
            {% if p.tags.exists %}
                <i class="fa-solid fa-tags" style="color: #70a5ff;"></i>
                {% for tag in p.tags.iterator %}
                    <a href="{{ tag.get_absolute_url }}">
                        <span class="badge rounded-pill text-bg-light">{{ tag }}</span>
                    </a>
                {% endfor %}
            <br/>
            <br/>
            {% endif %}
            <a class="btn btn-primary" href="{{ p.get_absolute_url }}">상세 보기 →</a>
        </div>
        <div class="card-footer text-muted"> {{ p.created_at }}
        <a href="#">{{ p.author | upper }}</a>
    </div>
    </div>
            {% endfor %}
            {% else %}
            <h3> 아직 게시물이 없습니다.</h3>
            {% endif %}
 <!-- Pagination-->
    <nav aria-label="Pagination">
        <hr class="my-0" />
        <ul class="pagination justify-content-center my-4">
            {% if page_obj.has_previous %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}" tabindex="-1">Newer</a></li>
            {% else %}
            <li class="page-item disabled"><a class="page-link" href="#!" tabindex="-1" aria-disabled="True">Newer</a></li>
            {% endif %}
            {% for page in paginator.page_range %}
                {% if page == page_obj.number %}
                    <li class="page-item active" aria-current="page"><a class="page-link" href="?page={{ page }}">{{ page }}</a></li>
                {% else %}
                    <li class="page-item" aria-current="page"><a class="page-link" href="?page={{ page }}">{{ page }}</a></li>
                {% endif %}
            {% endfor %}
            {% if page_obj.has_next %}
                <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">Older</a></li>
            {% else %}
                <li class="page-item disabled"><a class="page-link" href="#">Older</a></li>
            {% endif %}
        </ul>
    </nav>
{% endblock %}